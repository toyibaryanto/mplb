<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MPLB - SMK Cendekia Batujajar</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Config Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        tosca: { 50:'#f0fdfa', 100:'#ccfbf1', 200:'#99f6e4', 300:'#5eead4', 400:'#2dd4bf', 500:'#14b8a6', 600:'#0d9488', 700:'#0f766e', 800:'#115e59', 900:'#134e4a' },
                        gold: { 400:'#fbbf24', 500:'#f59e0b', 600:'#d97706' }
                    },
                    fontFamily: { sans: ['Poppins', 'sans-serif'], body: ['Inter', 'sans-serif'] }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #f0fdfa;
            background-image: radial-gradient(at 0% 0%, hsla(168,76%,65%,0.4) 0, transparent 50%), radial-gradient(at 100% 100%, hsla(180,60%,85%,0.6) 0, transparent 50%);
            background-attachment: fixed;
            overflow-x: hidden;
        }
        .glass { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.5); box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05); }
        .glass-dark { background: rgba(15, 118, 110, 0.95); backdrop-filter: blur(12px); color: white; }
        .glass-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.6); transition: all 0.4s ease; }
        .glass-card:hover { transform: translateY(-5px); background: #ffffff; box-shadow: 0 15px 30px -10px rgba(20, 184, 166, 0.3); border-color: #2dd4bf; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #14b8a6; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; opacity: 0; transform: translateY(10px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }
        .text-gradient { background: linear-gradient(to right, #0f766e, #2dd4bf); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* Nav Active State - Fixed Logic */
        .nav-link { position: relative; color: #475569; font-weight: 600; transition: all 0.3s; }
        .nav-link:hover { color: #0d9488; }
        .nav-link.active { color: #0f766e; }
        .nav-link::after { content: ''; position: absolute; width: 0; height: 2px; bottom: -4px; left: 0; background-color: #14b8a6; transition: width 0.3s; }
        .nav-link.active::after { width: 100%; }

        /* Mobile Nav Active */
        .mobile-link.active { background-color: #ccfbf1; color: #115e59; font-weight: bold; }

        /* Timeline Styles */
        .timeline-line { position: absolute; left: 24px; top: 0; bottom: 0; width: 2px; background: #cbd5e1; z-index: 0; }
        .timeline-dot { width: 40px; height: 40px; border-radius: 50%; background: #0f766e; color: white; display: flex; align-items: center; justify-content: center; position: relative; z-index: 10; font-weight: bold; border: 4px solid #ccfbf1; font-size: 0.8rem; }
        .active-tab { background-color: #0f766e; color: white; border-color: #0f766e; }
        .inactive-tab { background-color: white; color: #64748b; border-color: #e2e8f0; }
    </style>
</head>
<body class="text-slate-700 antialiased font-body">

    <div id="app" class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="fixed w-full z-50 top-0 transition-all duration-300" id="main-header">
            <div class="glass shadow-sm">
                <div class="container mx-auto px-4 py-3 flex justify-between items-center">
                    <div class="flex items-center gap-3 cursor-pointer" onclick="router('home')">
                        <img id="nav-logo-1" src="" alt="Logo Sekolah" class="h-10 w-auto object-contain">
                        <div class="h-8 w-[1px] bg-slate-300 hidden md:block"></div>
                        <img id="nav-logo-2" src="" alt="Logo Jurusan" class="h-10 w-auto object-contain hidden md:block">
                        <div class="ml-2 leading-tight">
                            <h1 class="font-bold text-tosca-800 text-xs md:text-sm uppercase tracking-wider">SMK Cendekia Batujajar</h1>
                            <p class="text-[10px] md:text-xs text-slate-500 font-bold tracking-wide">MPLB</p>
                        </div>
                    </div>

                    <!-- Desktop Nav -->
                    <nav class="hidden lg:flex items-center gap-6">
                        <a href="#" onclick="router('home')" id="nav-home" class="nav-link text-sm">Beranda</a>
                        <a href="#" onclick="router('profile')" id="nav-profile" class="nav-link text-sm">Profil</a>
                        <a href="#" onclick="router('academic')" id="nav-academic" class="nav-link text-sm">Akademik</a>
                        <a href="#" onclick="router('agenda')" id="nav-agenda" class="nav-link text-sm">Agenda</a>
                        <a href="#" onclick="router('teachers')" id="nav-teachers" class="nav-link text-sm">Guru</a>
                        <a href="#" onclick="router('news')" id="nav-news" class="nav-link text-sm">Berita</a>
                        <a href="#" onclick="router('elearning')" id="nav-elearning" class="nav-link text-sm">E-Learning</a>
                        <a href="#" onclick="router('gallery')" id="nav-gallery" class="nav-link text-sm">Galeri</a>
                    </nav>
                    <button onclick="toggleMobileMenu()" class="lg:hidden text-tosca-700 text-2xl"><i class="fas fa-bars"></i></button>
                </div>
            </div>
            
            <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden glass lg:hidden absolute w-full border-t border-white/40 top-[64px]">
                <div class="flex flex-col p-4 gap-2">
                    <a href="#" onclick="router('home'); toggleMobileMenu()" id="mob-home" class="mobile-link block py-3 px-4 rounded-lg hover:bg-tosca-50 font-medium">Beranda</a>
                    <a href="#" onclick="router('profile'); toggleMobileMenu()" id="mob-profile" class="mobile-link block py-3 px-4 rounded-lg hover:bg-tosca-50 font-medium">Profil & TeFa</a>
                    <a href="#" onclick="router('academic'); toggleMobileMenu()" id="mob-academic" class="mobile-link block py-3 px-4 rounded-lg hover:bg-tosca-50 font-medium">Akademik & Kurikulum</a>
                    <a href="#" onclick="router('agenda'); toggleMobileMenu()" id="mob-agenda" class="mobile-link block py-3 px-4 rounded-lg hover:bg-tosca-50 font-medium">Agenda Kegiatan</a>
                    <a href="#" onclick="router('teachers'); toggleMobileMenu()" id="mob-teachers" class="mobile-link block py-3 px-4 rounded-lg hover:bg-tosca-50 font-medium">Tim Pengajar</a>
                    <a href="#" onclick="router('news'); toggleMobileMenu()" id="mob-news" class="mobile-link block py-3 px-4 rounded-lg hover:bg-tosca-50 font-medium">Berita</a>
                    <a href="#" onclick="router('elearning'); toggleMobileMenu()" id="mob-elearning" class="mobile-link block py-3 px-4 rounded-lg hover:bg-tosca-50 font-medium">E-Learning</a>
                    <a href="#" onclick="router('gallery'); toggleMobileMenu()" id="mob-gallery" class="mobile-link block py-3 px-4 rounded-lg hover:bg-tosca-50 font-medium">Galeri</a>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main id="main-content" class="flex-grow pt-24 pb-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto w-full min-h-[80vh]">
            <!-- Content will be injected here -->
        </main>

        <!-- Footer -->
        <footer class="glass-dark mt-auto border-t border-white/20">
            <div class="max-w-7xl mx-auto py-8 px-6 text-center md:text-left md:flex justify-between items-center">
                <div>
                    <h3 class="font-bold text-white mb-1">SMK Cendekia Batujajar</h3>
                    <p class="text-xs text-white/60">Center of Excellence for Vocational Education</p>
                </div>
                <div class="mt-4 md:mt-0">
                    <p class="text-xs text-white/60">&copy; 2025 Toyib Aryanto, S. Pd., Gr., MCE., QPOA</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- JavaScript Application Logic -->
    <script>
        // API URL Backend Google Apps Script
        const API_URL = "https://script.google.com/macros/s/AKfycbwbcCzYzCUZknYVA0cwILzB7MU-oHfZV_ark7nLuo71bfXgQVtsVvDohCf4DAf2fb4HrQ/exec"; 
        
        let appData = {};

        // Data Default (Skeleton)
        const DEFAULT_DATA = {
            logos: { school: "", program: "" },
            home: { tagline: "Memuat...", heroTitle: "", heroSubtitle: "", heroDesc: "", heroImage: "", usp: "" },
            profile: { 
                tefa: { name: "", desc: "", image: "" }, 
                headOfProgram: { name: "", message: "", photo: "" }, 
                competencies: [], facilities: [], partners: [], 
                career: { jobs: "", testimonials: [] }, 
                teachers: [] 
            },
            academic: { curriculum: [], info: [] },
            agenda: [], 
            gallery: [], video: { url: "", title: "" }, news: [], materials: []
        };

        // --- INIT ---
        async function init() {
            const main = document.getElementById('main-content');
            main.innerHTML = `
                <div class="flex flex-col items-center justify-center py-40 fade-in">
                    <div class="loader mb-4"></div>
                    <p class="text-tosca-700 animate-pulse">Menghubungkan ke Portal Sekolah...</p>
                </div>
            `;

            try {
                const res = await fetch(API_URL);
                const json = await res.json();
                if (json.status === 'success') {
                    appData = json.data;
                    localStorage.setItem('mplb_public_cache', JSON.stringify(appData));
                } else throw new Error("API Error");
            } catch (e) {
                console.error(e);
                const cached = localStorage.getItem('mplb_public_cache');
                appData = cached ? JSON.parse(cached) : DEFAULT_DATA;
                if(!cached) main.innerHTML = `<div class="text-center text-red-500 py-20">Gagal memuat data. Periksa koneksi internet.</div>`;
            }

            renderHeader();
            router('home');
        }

        // --- ROUTER & NAV LOGIC (FIXED) ---
        function router(page) {
            updateActiveMenu(page); // Set active class safely
            
            const main = document.getElementById('main-content');
            window.scrollTo(0,0);
            
            // Wait for data if not loaded (basic check)
            if (!appData.home && page !== 'home') return;

            main.style.opacity = 0;
            setTimeout(() => {
                if (page === 'home') renderHome(main);
                else if (page === 'profile') renderProfile(main);
                else if (page === 'academic') renderAcademic(main);
                else if (page === 'agenda') renderAgenda(main); // New Page
                else if (page === 'teachers') renderTeachers(main);
                else if (page === 'news') renderNews(main);
                else if (page === 'elearning') renderLearning(main);
                else if (page === 'gallery') renderGallery(main);
                
                main.style.transition = 'opacity 0.4s ease-in-out';
                main.style.opacity = 1;
            }, 200);
        }

        function updateActiveMenu(activePage) {
            // Desktop
            document.querySelectorAll('.nav-link').forEach(el => el.classList.remove('active'));
            const desktopLink = document.getElementById(`nav-${activePage}`);
            if (desktopLink) desktopLink.classList.add('active');

            // Mobile
            document.querySelectorAll('.mobile-link').forEach(el => {
                el.classList.remove('active', 'bg-tosca-50', 'text-tosca-800');
                el.classList.add('hover:bg-tosca-50');
            });
            const mobileLink = document.getElementById(`mob-${activePage}`);
            if (mobileLink) {
                mobileLink.classList.add('active', 'bg-tosca-50', 'text-tosca-800');
                mobileLink.classList.remove('hover:bg-tosca-50');
            }
        }

        function renderHeader() {
            if(appData.logos) {
                const l1 = document.getElementById('nav-logo-1');
                const l2 = document.getElementById('nav-logo-2');
                if(l1) l1.src = appData.logos.school || '';
                if(l2) l2.src = appData.logos.program || '';
            }
        }

        // --- RENDER FUNCTIONS ---

        // 1. AGENDA KEGIATAN (NEW)
        function renderAgenda(container) {
            const events = appData.agenda || [];
            
            if(events.length === 0) {
                container.innerHTML = `<div class="text-center py-20 text-slate-500">Belum ada agenda kegiatan yang dijadwalkan.</div>`;
                return;
            }

            // Sort dates
            events.sort((a, b) => new Date(a.date) - new Date(b.date));

            // Group by Month
            const groupedEvents = events.reduce((acc, evt) => {
                const date = new Date(evt.date);
                if(isNaN(date)) return acc; // Skip invalid dates
                const monthYear = date.toLocaleDateString('id-ID', { month: 'long', year: 'numeric' });
                if(!acc[monthYear]) acc[monthYear] = [];
                acc[monthYear].push(evt);
                return acc;
            }, {});

            let agendaHTML = '';
            for (const [month, items] of Object.entries(groupedEvents)) {
                const itemsHTML = items.map(e => `
                    <div class="flex flex-col md:flex-row gap-4 bg-white p-5 rounded-xl border-l-4 border-tosca-500 shadow-sm hover:shadow-md transition mb-4">
                        <div class="flex-shrink-0 flex flex-row md:flex-col items-center md:justify-center gap-2 md:gap-0 bg-tosca-50 p-3 rounded-lg min-w-[80px] text-center">
                            <span class="text-2xl font-bold text-tosca-700">${new Date(e.date).getDate()}</span>
                            <span class="text-xs uppercase font-bold text-tosca-500">${new Date(e.date).toLocaleDateString('id-ID', { month: 'short' })}</span>
                        </div>
                        <div class="flex-grow">
                            <div class="flex flex-col md:flex-row md:justify-between md:items-start mb-2">
                                <h4 class="font-bold text-lg text-slate-800">${e.title}</h4>
                                <span class="text-xs font-bold px-3 py-1 rounded-full bg-slate-100 text-slate-500 self-start mt-1 md:mt-0 uppercase tracking-wide border border-slate-200">${e.category || 'Umum'}</span>
                            </div>
                            <div class="flex flex-wrap gap-4 text-sm text-slate-500">
                                <span class="flex items-center"><i class="far fa-clock mr-2 text-gold-500"></i> ${e.time}</span>
                                <span class="flex items-center"><i class="fas fa-map-marker-alt mr-2 text-gold-500"></i> ${e.location}</span>
                            </div>
                        </div>
                    </div>
                `).join('');

                agendaHTML += `
                    <div class="mb-10 fade-in">
                        <h3 class="text-xl font-bold text-slate-700 mb-4 flex items-center">
                            <span class="w-3 h-3 bg-gold-500 rounded-full mr-3 ring-4 ring-gold-100"></span>
                            ${month}
                        </h3>
                        <div class="space-y-4 border-l-2 border-slate-200 ml-1.5 pl-6 pt-2">
                            ${itemsHTML}
                        </div>
                    </div>
                `;
            }

            container.innerHTML = `
                <div class="fade-in max-w-4xl mx-auto">
                    <div class="text-center mb-12">
                        <span class="text-tosca-600 font-bold tracking-widest uppercase text-xs mb-2 block">Kalender Akademik</span>
                        <h2 class="text-3xl font-bold text-slate-800">Agenda Kegiatan MPLB</h2>
                        <p class="text-slate-500 mt-2">Jadwal kegiatan akademik, kunjungan industri, dan event jurusan.</p>
                    </div>
                    ${agendaHTML}
                </div>
            `;
        }

        // 2. E-LEARNING (OPEN ACCESS)
        function renderLearning(container) {
            const materials = appData.materials || [];
            
            const grouped = materials.reduce((acc, item) => {
                const f = item.fase || 'Umum';
                if(!acc[f]) acc[f] = [];
                acc[f].push(item);
                return acc;
            }, {});

            let contentHTML = '';
            for (const [fase, items] of Object.entries(grouped)) {
                const itemsHTML = items.map(m => `
                    <div class="bg-white p-4 rounded-xl border border-slate-100 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:shadow-lg transition group">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 rounded-full bg-tosca-50 flex items-center justify-center text-tosca-600 flex-shrink-0 group-hover:bg-tosca-600 group-hover:text-white transition">
                                <i class="fas ${m.type === 'Video' ? 'fa-play' : 'fa-file-alt'} text-lg"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-slate-700 text-sm group-hover:text-tosca-700 transition">${m.topic}</h4>
                                <p class="text-xs text-slate-500 mt-1">${m.element} &bull; <span class="bg-slate-100 px-1.5 rounded text-[10px] font-semibold">${m.type}</span></p>
                            </div>
                        </div>
                        <a href="${m.link}" target="_blank" class="px-5 py-2.5 bg-tosca-600 text-white text-xs font-bold rounded-lg hover:bg-tosca-700 text-center transition shadow-lg shadow-tosca-200 hover:shadow-tosca-300 transform hover:-translate-y-0.5">
                            <i class="fas fa-external-link-alt mr-2"></i>Buka Materi
                        </a>
                    </div>
                `).join('');
                contentHTML += `
                    <div class="mb-10 fade-in">
                        <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-3">
                            <i class="fas fa-layer-group text-gold-500"></i> ${fase}
                        </h3>
                        <div class="space-y-3 grid gap-3">${itemsHTML}</div>
                    </div>
                `;
            }

            if (!contentHTML) contentHTML = `<div class="text-center py-20 text-slate-500 bg-white rounded-xl shadow-sm">Belum ada materi pembelajaran yang diunggah.</div>`;

            container.innerHTML = `
                <div class="fade-in max-w-4xl mx-auto">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-bold text-slate-800">E-Learning (Open Access)</h2>
                        <p class="text-slate-500 mt-2">Materi pembelajaran digital MPLB yang dapat diakses secara terbuka untuk umum.</p>
                    </div>
                    ${contentHTML}
                </div>
            `;
        }

        // 3. ACADEMIC
        function renderAcademic(container) {
            const curriculum = appData.academic.curriculum || [];
            const info = appData.academic.info || [];
            const phases = { 'Fase E': {}, 'Fase F': {} };
            curriculum.forEach(item => {
                if (!phases[item.phase]) phases[item.phase] = {};
                if (!phases[item.phase][item.semester]) phases[item.phase][item.semester] = [];
                phases[item.phase][item.semester].push(item);
            });

            const infoHTML = info.map(i => `
                <div class="bg-white p-6 rounded-xl border border-slate-100 shadow-sm flex items-start gap-4 hover:shadow-md transition">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-gold-400 to-gold-600 text-white flex items-center justify-center flex-shrink-0 text-lg shadow-md">
                        <i class="fas ${i.icon}"></i>
                    </div>
                    <div>
                        <h4 class="font-bold text-slate-800 text-sm uppercase mb-1 tracking-wide">${i.title}</h4>
                        <p class="text-sm text-slate-600 leading-relaxed">${i.content}</p>
                    </div>
                </div>
            `).join('');

            container.innerHTML = `
                <div class="fade-in space-y-12">
                    <div class="text-center max-w-3xl mx-auto">
                        <span class="text-tosca-600 font-bold tracking-widest uppercase text-xs mb-2 block">Pusat Informasi</span>
                        <h2 class="text-3xl md:text-4xl font-extrabold text-slate-800 mb-4">Akademik & Kurikulum</h2>
                        <p class="text-slate-500 text-lg">Peta jalan kompetensi (Roadmap) siswa MPLB dari Fase E hingga F.</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5">${infoHTML}</div>

                    <div class="flex justify-center gap-4 mb-4">
                        <button onclick="switchPhase('Fase E')" id="btn-fase-e" class="px-8 py-3 rounded-full font-bold border-2 transition active-tab shadow-sm">Fase E (Kelas X)</button>
                        <button onclick="switchPhase('Fase F')" id="btn-fase-f" class="px-8 py-3 rounded-full font-bold border-2 transition inactive-tab shadow-sm">Fase F (Kelas XI-XII)</button>
                    </div>

                    <div id="curriculum-container" class="transition-all duration-300">
                        ${renderPhaseContent(phases['Fase E'])}
                    </div>
                </div>
            `;

            window.switchPhase = (phaseName) => {
                const container = document.getElementById('curriculum-container');
                container.style.opacity = 0;
                setTimeout(() => {
                    container.innerHTML = renderPhaseContent(phases[phaseName]);
                    container.style.opacity = 1;
                }, 200);
                
                const btnE = document.getElementById('btn-fase-e');
                const btnF = document.getElementById('btn-fase-f');
                if (phaseName === 'Fase E') {
                    btnE.className = 'px-8 py-3 rounded-full font-bold border-2 transition active-tab shadow-sm';
                    btnF.className = 'px-8 py-3 rounded-full font-bold border-2 transition inactive-tab shadow-sm';
                } else {
                    btnE.className = 'px-8 py-3 rounded-full font-bold border-2 transition inactive-tab shadow-sm';
                    btnF.className = 'px-8 py-3 rounded-full font-bold border-2 transition active-tab shadow-sm';
                }
            };
        }

        function renderPhaseContent(semesters) {
            if (!semesters || Object.keys(semesters).length === 0) return `<div class="text-center py-20 text-slate-400 bg-white rounded-xl">Data kurikulum belum tersedia untuk fase ini.</div>`;
            
            let html = '<div class="space-y-12 relative pb-10">';
            html += '<div class="timeline-line md:left-1/2 md:-ml-[1px] hidden md:block h-full"></div>';
            
            let isLeft = true;
            for (const [semName, units] of Object.entries(semesters)) {
                const unitsHTML = units.map(u => `
                    <div class="glass-card p-6 rounded-xl mb-5 border-l-4 border-tosca-500 shadow-sm relative">
                        <div class="flex justify-between items-start mb-3 border-b border-slate-100 pb-2">
                            <h4 class="font-bold text-lg text-slate-800 leading-tight">${u.unit}</h4>
                            <span class="text-[10px] bg-slate-100 text-slate-500 px-2 py-1 rounded border border-slate-200 font-mono">${u.skkni}</span>
                        </div>
                        <div class="space-y-4 text-sm">
                            <div class="bg-tosca-50 p-3 rounded-lg border border-tosca-100">
                                <p class="font-bold text-xs text-tosca-700 uppercase mb-1 flex items-center"><i class="fas fa-check-circle mr-1"></i> Hard Skills & KPI</p>
                                <pre class="whitespace-pre-wrap font-sans text-slate-600 text-xs leading-relaxed">${u.kpi}</pre>
                            </div>
                            <div class="grid grid-cols-2 gap-3">
                                <div><p class="font-bold text-xs text-slate-400 uppercase mb-1">Tools & Budaya</p><p class="text-slate-600 text-xs whitespace-pre-wrap">${u.apps_culture}</p></div>
                                <div><p class="font-bold text-xs text-slate-400 uppercase mb-1">Profil & Kolaborasi</p><p class="text-slate-600 text-xs whitespace-pre-wrap">${u.profile}\n<span class="text-gold-600 font-bold">${u.collab}</span></p></div>
                            </div>
                        </div>
                    </div>
                `).join('');

                html += `
                    <div class="flex flex-col md:flex-row ${isLeft ? '' : 'md:flex-row-reverse'} items-center md:items-start relative z-10">
                        <div class="w-full md:w-1/2 ${isLeft ? 'md:pr-12' : 'md:pl-12'} mb-8 md:mb-0">
                            <div class="bg-tosca-600 text-white inline-block px-5 py-1.5 rounded-full text-sm font-bold mb-6 shadow-lg shadow-tosca-200 sticky top-24 z-20">
                                ${semName}
                            </div>
                            <div class="space-y-4">${unitsHTML}</div>
                        </div>
                        <div class="hidden md:flex absolute left-1/2 -ml-[20px] timeline-dot shadow-xl z-10 top-0 bg-white">${semName.split(' ')[1]}</div>
                        <div class="w-full md:w-1/2"></div>
                    </div>
                `;
                isLeft = !isLeft;
            }
            html += '</div>';
            return html;
        }

        // --- OTHER RENDER FUNCTIONS (HOME, PROFILE, TEACHERS, NEWS, GALLERY) ---
        // (Isi sama dengan sebelumnya, dirender ulang untuk kelengkapan file)
        
        function renderHome(c) {
            const fHTML = (appData.profile.facilities||[]).slice(0,3).map(f=>`<div class="glass-card rounded-xl overflow-hidden group h-full flex flex-col"><div class="h-48 overflow-hidden relative"><img src="${f.image}" class="w-full h-full object-cover transition duration-700 group-hover:scale-110"><div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition"></div></div><div class="p-5 flex-grow"><h4 class="font-bold text-tosca-800 text-lg mb-2 group-hover:text-tosca-600">${f.name}</h4><p class="text-sm text-slate-600 line-clamp-2">${f.desc}</p></div></div>`).join('');
            const pHTML = (appData.profile.partners||[]).map(p=>`<div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 hover:shadow-md hover:border-tosca-300 transition flex flex-col items-center justify-center gap-3 h-28 w-28 flex-shrink-0 group grayscale hover:grayscale-0"><img src="${p.logo}" class="h-10 w-auto object-contain transition"><span class="text-[10px] font-bold text-slate-400 group-hover:text-tosca-600 text-center">${p.type}</span></div>`).join('');
            c.innerHTML = `<div class="fade-in space-y-20"><div class="relative rounded-[2rem] overflow-hidden shadow-2xl min-h-[550px] flex items-center group"><img src="${appData.home.heroImage}" class="absolute inset-0 w-full h-full object-cover transition duration-[20s] group-hover:scale-110"><div class="absolute inset-0 bg-gradient-to-r from-tosca-900/95 via-tosca-800/80 to-tosca-900/30"></div><div class="relative z-10 px-8 md:px-16 max-w-4xl text-white"><div class="flex flex-wrap items-center gap-3 mb-6"><span class="px-4 py-1.5 bg-gold-500 text-white rounded-full text-xs font-bold uppercase tracking-wider shadow-lg animate-pulse"><i class="fas fa-star mr-1"></i> Unggulan</span><span class="hidden md:inline-block h-6 w-[1px] bg-white/30"></span><span class="text-tosca-100 font-medium tracking-wide text-sm">${appData.home.tagline||'Sinergi Teknologi'}</span></div><h2 class="text-4xl md:text-6xl font-extrabold mb-6 leading-tight drop-shadow-lg">${appData.home.heroTitle}</h2><div class="border-l-4 border-gold-500 pl-6 bg-white/5 py-4 rounded-r-xl backdrop-blur-sm mb-8 max-w-2xl"><p class="text-lg md:text-xl text-tosca-50 font-light leading-relaxed">"${appData.home.usp||appData.home.heroDesc}"</p></div><div class="flex flex-wrap gap-4"><button onclick="router('profile')" class="bg-white text-tosca-800 px-8 py-4 rounded-full font-bold shadow-lg hover:scale-105 transition flex items-center gap-2"><span>Kenali Jurusan</span> <i class="fas fa-arrow-right"></i></button><button onclick="router('elearning')" class="backdrop-blur-md bg-white/20 border border-white/40 text-white px-8 py-4 rounded-full font-bold hover:bg-white/30 transition">E-Learning</button></div></div></div><div><div class="flex flex-col md:flex-row justify-between items-end mb-10 gap-4"><div><h3 class="text-3xl font-bold text-slate-800 relative inline-block">Fasilitas Industri<span class="absolute bottom-1 left-0 w-full h-3 bg-tosca-200 -z-10 opacity-60"></span></h3><p class="text-slate-500 mt-3 text-lg">Infrastruktur modern simulasi kerja.</p></div><button onclick="router('profile')" class="text-tosca-600 font-bold hover:text-tosca-800 transition">Selengkapnya &rarr;</button></div><div class="grid grid-cols-1 md:grid-cols-3 gap-8">${fHTML}</div></div><div class="glass p-10 rounded-3xl border-l-8 border-tosca-500 shadow-xl relative overflow-hidden"><div class="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-tosca-100 rounded-full opacity-50 blur-3xl"></div><h3 class="text-2xl font-bold text-slate-800 mb-8 text-center md:text-left relative z-10"><i class="fas fa-handshake text-tosca-500 mr-2"></i>Ekosistem Industri</h3><div class="flex flex-wrap justify-center md:justify-start gap-6 relative z-10">${pHTML}</div></div></div>`;
        }

        function renderProfile(c) {
            const compsHTML=(appData.profile.competencies||[]).map(x=>`<div class="glass-card p-6 rounded-2xl text-center hover:bg-tosca-50 group border border-white/50 shadow-sm transition"><div class="w-16 h-16 mx-auto bg-tosca-100 rounded-2xl rotate-3 flex items-center justify-center mb-5 group-hover:rotate-6 transition shadow-inner"><i class="fas ${x.icon} text-3xl text-tosca-600 -rotate-3 group-hover:-rotate-6 transition"></i></div><h4 class="font-bold text-lg text-slate-800 mb-2">${x.title}</h4><p class="text-sm text-slate-500">${x.desc}</p></div>`).join('');
            const testHTML=(appData.profile.career.testimonials||[]).map(t=>`<div class="bg-white p-8 rounded-2xl shadow-lg border border-slate-50 relative mt-10 hover:-translate-y-2 transition"><div class="absolute -top-8 left-1/2 transform -translate-x-1/2"><img src="${t.photo}" class="w-16 h-16 rounded-full border-4 border-white shadow-md object-cover bg-gray-200"></div><div class="absolute top-4 right-4"><span class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider bg-blue-100 text-blue-700">${t.status}</span></div><div class="pt-10 text-center"><h5 class="font-bold text-slate-800 text-base">${t.name}</h5><p class="text-xs text-tosca-600 font-bold uppercase mb-4 tracking-wide">${t.role}</p><p class="text-sm text-slate-600 italic">"${t.quote}"</p></div></div>`).join('');
            c.innerHTML=`<div class="fade-in space-y-24"><div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center"><div class="glass p-8 rounded-[2.5rem] relative overflow-hidden shadow-2xl border border-white/60"><h3 class="text-xl font-bold text-tosca-700 mb-6 uppercase tracking-widest">Leadership</h3><div class="flex gap-6 items-center mb-8"><img src="${appData.profile.headOfProgram.photo}" class="w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg"><div class="text-left"><p class="font-bold text-xl text-slate-800">${appData.profile.headOfProgram.name}</p><p class="text-xs text-tosca-600 font-bold uppercase tracking-wider mt-1">Kaprog</p></div></div><blockquote class="text-lg text-slate-600 italic font-light border-l-4 border-gold-400 pl-6">"${appData.profile.headOfProgram.message}"</blockquote></div><div class="space-y-8"><div><h2 class="text-4xl md:text-5xl font-extrabold text-slate-800 leading-tight mb-4">Membangun Karakter <span class="text-gradient">Profesional</span></h2><p class="text-slate-600 text-lg">Kurikulum presisi kebutuhan industri.</p></div><div class="grid grid-cols-1 sm:grid-cols-2 gap-5">${compsHTML}</div></div></div><div class="rounded-3xl bg-slate-900 text-white overflow-hidden shadow-2xl relative group h-[500px] flex items-center justify-center"><img src="${appData.profile.tefa.image}" class="absolute inset-0 w-full h-full object-cover opacity-40 transition duration-1000 group-hover:scale-110 group-hover:opacity-30"><div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-slate-900 opacity-90"></div><div class="relative z-10 p-10 md:p-16 text-center max-w-4xl"><span class="inline-block border border-gold-400 text-gold-400 px-5 py-2 rounded-full text-xs font-bold uppercase mb-6 tracking-widest">Teaching Factory</span><h3 class="text-4xl md:text-6xl font-extrabold mb-6 leading-tight">${appData.profile.tefa.name}</h3><p class="text-slate-300 text-lg md:text-xl mb-8 font-light">${appData.profile.tefa.desc}</p></div></div><div class="py-10"><div class="text-center mb-16"><h3 class="text-4xl font-bold text-slate-800 mb-4">Prospek Karier</h3><p class="text-slate-500 text-lg">Jejak langkah alumni: <span class="font-bold text-tosca-600">BMW</span></p></div><div class="grid grid-cols-1 md:grid-cols-3 gap-8 px-4">${testHTML}</div></div></div>`;
        }

        function renderTeachers(c) {
            const tHTML=(appData.profile.teachers||[]).map(t=>`<div class="glass-card rounded-2xl overflow-hidden hover:shadow-2xl transition duration-500 group flex flex-col h-full border-t-4 border-tosca-500 bg-white"><div class="p-8 flex flex-col items-center text-center flex-grow"><div class="w-32 h-32 rounded-full p-1 bg-gradient-to-tr from-tosca-300 to-gold-400 mb-6 shadow-lg relative"><img src="${t.photo}" class="w-full h-full rounded-full object-cover border-4 border-white bg-white"></div><h4 class="text-xl font-bold text-slate-800 mb-1">${t.name}</h4><span class="text-xs font-bold text-tosca-600 uppercase tracking-widest mb-6">${t.role}</span><div class="mb-6 space-y-4 w-full"><div class="bg-tosca-50 rounded-lg p-3"><span class="block text-[10px] font-bold text-slate-400 uppercase mb-1">Spesialisasi</span><p class="text-sm font-semibold text-tosca-800">${t.specialist}</p></div><div class="bg-gradient-to-r from-gold-500 to-gold-600 text-white rounded-lg p-3 shadow-md"><span class="block text-[10px] font-bold text-white/90 uppercase mb-1">Pengalaman</span><p class="text-sm font-bold">${t.experience||'Praktisi'}</p></div></div><p class="text-xs italic text-slate-500 mt-auto">"${t.quote}"</p></div></div>`).join('');
            c.innerHTML=`<div class="fade-in space-y-16"><div class="text-center max-w-3xl mx-auto"><h2 class="text-4xl md:text-5xl font-extrabold text-slate-800 mb-6">Tim Pengajar <span class="text-gradient">Profesional</span></h2><div class="h-1.5 w-24 bg-gold-400 mx-auto rounded-full mt-8"></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">${tHTML}</div></div>`;
        }

        function renderNews(c) {
            const news=appData.news||[];
            if(!news.length){c.innerHTML='<div class="text-center py-20 text-slate-500">Belum ada berita.</div>';return;}
            const nHTML=news.map(n=>`<div class="glass-card rounded-xl overflow-hidden flex flex-col h-full hover:shadow-xl transition"><div class="h-48 overflow-hidden relative"><img src="${n.image}" class="w-full h-full object-cover transition duration-700 hover:scale-110" onerror="this.src='https://via.placeholder.com/400x200'"><div class="absolute top-2 right-2 bg-tosca-600 text-white text-[10px] px-2 py-1 rounded font-bold uppercase">${n.category}</div></div><div class="p-6 flex flex-col flex-grow"><div class="flex items-center text-xs text-slate-400 mb-2 space-x-2"><span>${n.date?new Date(n.date).toLocaleDateString('id-ID'):'-'}</span><span>${n.author}</span></div><h3 class="font-bold text-lg text-slate-800 mb-3 leading-tight hover:text-tosca-600 transition">${n.title}</h3><p class="text-sm text-slate-600 line-clamp-3 mb-4 flex-grow">${n.content}</p></div></div>`).join('');
            c.innerHTML=`<div class="fade-in space-y-8"><div class="text-center mb-8"><h2 class="text-3xl font-bold text-slate-800 mb-4">Kabar Cendekia</h2></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">${nHTML}</div></div>`;
        }

        function renderGallery(c) {
            const gHTML=(appData.gallery||[]).map(i=>`<div class="break-inside-avoid mb-6"><div class="glass-card rounded-xl overflow-hidden bg-white shadow-md hover:shadow-xl transition"><img src="${i.url}" class="w-full h-auto transition duration-700 hover:scale-105"><div class="p-4 border-t border-slate-100"><p class="text-sm font-bold text-slate-700 text-center">${i.caption}</p></div></div></div>`).join('');
            c.innerHTML=`<div class="fade-in space-y-12"><div class="text-center max-w-3xl mx-auto"><h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-4">Galeri Aktivitas</h2></div><div class="glass p-4 rounded-3xl shadow-xl max-w-5xl mx-auto"><div class="aspect-w-16 aspect-h-9 w-full rounded-2xl overflow-hidden bg-black shadow-inner"><iframe class="w-full h-[400px] md:h-[500px]" src="${appData.video.url}" frameborder="0" allowfullscreen></iframe></div><div class="mt-4 text-center"><h3 class="font-bold text-slate-700"><i class="fab fa-youtube text-red-600 mr-2"></i> ${appData.video.title}</h3></div></div><div class="columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6">${gHTML}</div></div>`;
        }

        function toggleMobileMenu() { document.getElementById('mobile-menu').classList.toggle('hidden'); }
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>